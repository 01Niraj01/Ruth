<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>CampusConnect - Interactive Student Job Portal</title>
<style>
  * {
    box-sizing: border-box;
    font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
  }
  body {
    margin: 0;
    background: #eef3fb;
    color: #222;
    overflow-x: hidden;
  }
  header {
    background-color: #3f51b5;
    color: white;
    text-align: center;
    padding: 1rem 1rem 0.5rem;
    user-select: none;
    box-shadow: 0 2px 10px rgba(0,0,0,0.2);
  }
  header h1 {
    margin: 0;
    font-weight: 700;
    font-size: 2.2rem;
  }
  header p {
    margin: 0.2rem 0 1rem 0;
    font-weight: 300;
    font-size: 1.1rem;
  }
  nav {
    background: #283593;
    display: flex;
    justify-content: center;
    gap: 2rem;
    padding: 0.7rem 0;
    user-select: none;
    position: sticky;
    top: 0;
    z-index: 100;
    box-shadow: 0 2px 8px rgba(0,0,0,0.1);
  }
  nav a {
    color: white;
    text-decoration: none;
    font-weight: 600;
    font-size: 1.1rem;
    cursor: pointer;
    padding: 0.4rem 1rem;
    border-radius: 4px;
    transition: all 0.3s;
  }
  nav a:hover, nav a.active {
    background-color: #3949ab;
    transform: translateY(-2px);
  }
  /* Page container */
  .page {
    display: none;
    max-width: 960px;
    margin: 2rem auto 3rem;
    padding: 0 1rem;
    animation: fadeIn 0.5s ease;
  }
  @keyframes fadeIn {
    from { opacity: 0; transform: translateY(10px); }
    to { opacity: 1; transform: translateY(0); }
  }
  .page.active {
    display: block;
  }
  /* Landing page hero */
  #landingPage {
    height: 90vh;
    background: linear-gradient(rgba(0,0,0,0.6), rgba(0,0,0,0.6)), url('https://images.unsplash.com/photo-1522202176988-66273c2fd55f?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1471&q=80') center/cover no-repeat;
    display: flex;
    flex-direction: column;
    justify-content: center;
    align-items: center;
    color: white;
    text-shadow: 2px 2px 8px rgba(0,0,0,0.7);
    font-size: 2.4rem;
    padding: 0 1rem;
    text-align: center;
  }
  #landingPage button {
    margin-top: 2rem;
    padding: 0.8rem 2rem;
    font-size: 1.25rem;
    border: none;
    background-color: #3f51b5;
    border-radius: 6px;
    color: white;
    cursor: pointer;
    box-shadow: 0 4px 15px rgba(63,81,181,0.6);
    transition: all 0.3s ease;
    font-weight: 600;
  }
  #landingPage button:hover {
    background-color: #2c387e;
    transform: translateY(-3px);
    box-shadow: 0 6px 20px rgba(63,81,181,0.8);
  }

  /* Forms */
  form {
    background: white;
    padding: 1.5rem 2rem;
    border-radius: 10px;
    box-shadow: 0 4px 15px rgba(0,0,0,0.1);
    max-width: 480px;
    margin: 1rem auto;
    transition: transform 0.3s ease;
  }
  form:hover {
    transform: translateY(-5px);
  }
  form h3 {
    color: #3f51b5;
    margin-top: 0;
    text-align: center;
  }
  form input[type="text"],
  form input[type="email"],
  form input[type="password"],
  form textarea {
    width: 100%;
    padding: 0.8rem;
    margin: 0.6rem 0 1.2rem;
    border: 1.5px solid #ddd;
    border-radius: 6px;
    font-size: 1rem;
    transition: border-color 0.3s;
  }
  form input[type="text"]:focus,
  form input[type="email"]:focus,
  form input[type="password"]:focus,
  form textarea:focus {
    border-color: #3f51b5;
    outline: none;
  }
  form input[type="submit"],
  button.btn {
    cursor: pointer;
    background-color: #3f51b5;
    color: white;
    border: none;
    padding: 0.8rem 1.8rem;
    border-radius: 6px;
    font-size: 1.1rem;
    font-weight: 600;
    transition: all 0.3s ease;
    width: 100%;
    margin-top: 0.5rem;
  }
  form input[type="submit"]:hover,
  button.btn:hover {
    background-color: #2c387e;
    transform: translateY(-2px);
  }

  /* Cards for job postings and applications */
  .card {
    background: white;
    border-radius: 12px;
    box-shadow: 0 4px 12px rgba(0,0,0,0.1);
    margin-bottom: 1.8rem;
    padding: 1.5rem;
    transition: all 0.3s ease;
    border-left: 4px solid #3f51b5;
  }
  .card:hover {
    transform: translateY(-8px);
    box-shadow: 0 8px 25px rgba(0,0,0,0.15);
  }
  .card h3 {
    color: #3f51b5;
    margin-bottom: 0.8rem;
    font-size: 1.4rem;
  }
  .card p {
    margin: 0.5rem 0;
    color: #555;
  }
  .card small {
    color: #777;
    font-size: 0.9rem;
  }
  .card .job-meta {
    display: flex;
    gap: 1.5rem;
    margin: 1rem 0;
  }
  .card .job-meta div {
    display: flex;
    align-items: center;
    gap: 0.5rem;
    color: #555;
  }
  .card .job-meta img {
    width: 18px;
    height: 18px;
    opacity: 0.7;
  }

  /* Job portal links */
  .job-links {
    display: flex;
    gap: 2rem;
    justify-content: center;
    margin: 2rem 0 3rem;
    flex-wrap: wrap;
  }
  .job-link {
    display: flex;
    flex-direction: column;
    align-items: center;
    text-decoration: none;
    color: #3f51b5;
    font-weight: 600;
    font-size: 1rem;
    width: 120px;
    transition: all 0.3s ease;
    padding: 1rem;
    border-radius: 10px;
    background: white;
    box-shadow: 0 3px 10px rgba(0,0,0,0.08);
  }
  .job-link:hover {
    transform: scale(1.1);
    box-shadow: 0 5px 15px rgba(0,0,0,0.12);
    color: #283593;
  }
  .job-link img {
    width: 60px;
    height: 60px;
    object-fit: contain;
    margin-bottom: 0.8rem;
    filter: grayscale(30%);
    transition: filter 0.3s;
  }
  .job-link:hover img {
    filter: grayscale(0);
  }

  /* Application button */
  .apply-btn {
    background-color: #4caf50;
    border: none;
    color: white;
    padding: 0.7rem 1.5rem;
    border-radius: 6px;
    cursor: pointer;
    font-weight: 600;
    transition: all 0.3s ease;
    margin-top: 1rem;
    display: inline-block;
    font-size: 1rem;
  }
  .apply-btn:hover {
    background-color: #388e3c;
    transform: translateY(-2px);
    box-shadow: 0 3px 10px rgba(76,175,80,0.4);
  }

  /* Status badges */
  .status-badge {
    display: inline-block;
    padding: 0.3rem 0.8rem;
    border-radius: 20px;
    font-size: 0.85rem;
    font-weight: 600;
    margin-left: 0.5rem;
  }

  /* Application form popup */
  #applyModal {
    position: fixed;
    top: 0; left: 0; right:0; bottom: 0;
    background: rgba(0,0,0,0.6);
    display: none;
    justify-content: center;
    align-items: center;
    z-index: 9999;
    backdrop-filter: blur(3px);
  }
  #applyModal .modal-content {
    background: white;
    padding: 1.8rem 2.2rem;
    border-radius: 12px;
    width: 380px;
    max-width: 90vw;
    text-align: center;
    position: relative;
    box-shadow: 0 5px 25px rgba(0,0,0,0.2);
    animation: modalFadeIn 0.3s ease;
  }
  @keyframes modalFadeIn {
    from { opacity: 0; transform: translateY(-20px); }
    to { opacity: 1; transform: translateY(0); }
  }
  #applyModal .modal-content h3 {
    margin-bottom: 1.2rem;
    color: #3f51b5;
    font-size: 1.4rem;
  }
  #applyModal .modal-content input[type="text"],
  #applyModal .modal-content input[type="email"],
  #applyModal .modal-content textarea {
    width: 100%;
    margin: 0.7rem 0 1.3rem;
    padding: 0.8rem;
    font-size: 1rem;
    border-radius: 6px;
    border: 1.5px solid #ddd;
  }
  #applyModal .modal-content textarea {
    min-height: 100px;
    resize: vertical;
  }
  #applyModal .modal-content button.close-btn {
    position: absolute;
    top: 12px; right: 12px;
    background: #f44336;
    color: white;
    border: none;
    border-radius: 50%;
    font-size: 1.3rem;
    width: 32px;
    height: 32px;
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
    transition: background-color 0.3s;
  }
  #applyModal .modal-content button.close-btn:hover {
    background: #d32f2f;
  }
  #applyModal .modal-content button.submit-btn {
    background-color: #3f51b5;
    color: white;
    padding: 0.8rem 1.8rem;
    border: none;
    border-radius: 6px;
    font-weight: 600;
    cursor: pointer;
    transition: all 0.3s ease;
    font-size: 1.1rem;
    width: 100%;
  }
  #applyModal .modal-content button.submit-btn:hover {
    background-color: #2c387e;
    transform: translateY(-2px);
  }

  /* Footer */
  footer {
    background: #3f51b5;
    color: white;
    padding: 1.5rem 1rem;
    text-align: center;
    user-select: none;
    margin-top: 3rem;
    box-shadow: 0 -2px 10px rgba(0,0,0,0.1);
  }
  footer p {
    margin: 0.5rem 0;
  }
  .social-links {
    display: flex;
    justify-content: center;
    gap: 1.5rem;
    margin: 1rem 0;
  }
  .social-links a {
    color: white;
    font-size: 1.5rem;
    transition: transform 0.3s;
  }
  .social-links a:hover {
    transform: translateY(-3px);
  }

  /* Responsive adjustments */
  @media (max-width: 768px) {
    nav {
      gap: 1rem;
      padding: 0.7rem 1rem;
      flex-wrap: wrap;
    }
    nav a {
      font-size: 1rem;
      padding: 0.4rem 0.8rem;
    }
    #landingPage {
      font-size: 2rem;
      padding: 0 1.5rem;
    }
    .job-links {
      gap: 1.5rem;
    }
    .job-link {
      width: 100px;
    }
    .card {
      padding: 1.2rem;
    }
  }
</style>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
</head>
<body>
<header>
  <h1>CampusConnect</h1>
  <p id="header-subtext">Student Job Portal</p>
</header>

<!-- Navigation -->
<nav id="mainNav" style="display:none;">
  <a href="#" data-page="browse" class="active">Browse Jobs</a>
  <a href="#" data-page="post">Post Job</a>
  <a href="#" data-page="track">Track Applications</a>
  <a href="#" id="logoutBtn" style="margin-left: auto; color:#ff9e80;">Logout</a>
</nav>

<!-- Pages -->

<!-- Landing page -->
<section id="landingPage" class="page active" style="display:flex;">
  <div>
    <div style="font-weight:700; max-width: 800px; margin: 0 auto; user-select:none; line-height:1.3;">
      Bridging the Gap Between Education and Employment
    </div>
    <p style="font-size:1.2rem; margin-top:1rem; max-width:600px; text-shadow:1px 1px 4px rgba(0,0,0,0.7);">
      Find the perfect job opportunity tailored for students like you
    </p>
    <button onclick="openLoginModal()">
      <i class="fas fa-sign-in-alt" style="margin-right:8px;"></i> Login / Signup
    </button>
  </div>
</section>

<!-- Browse Jobs -->
<section id="browse" class="page">
  <h2 style="text-align:center; color:#3f51b5; margin-bottom:1.5rem;">Available Jobs</h2>
  
  <div class="job-links" aria-label="Job portals">
    <a href="https://www.adzuna.com" target="_blank" class="job-link" rel="noopener noreferrer" title="Adzuna">
      <img src="https://upload.wikimedia.org/wikipedia/commons/thumb/e/e8/Adzuna_logo.svg/256px-Adzuna_logo.svg.png" alt="Adzuna logo" />
      Adzuna
    </a>
    <a href="https://www.linkedin.com/jobs" target="_blank" class="job-link" rel="noopener noreferrer" title="LinkedIn Jobs">
      <img src="https://cdn-icons-png.flaticon.com/512/174/174857.png" alt="LinkedIn logo" />
      LinkedIn
    </a>
    <a href="https://www.indeed.com" target="_blank" class="job-link" rel="noopener noreferrer" title="Indeed">
      <img src="https://upload.wikimedia.org/wikipedia/commons/thumb/9/9f/Indeed_logo.svg/2560px-Indeed_logo.svg.png" alt="Indeed logo" style="width: 80px;" />
      Indeed
    </a>
    <a href="https://www.glassdoor.com" target="_blank" class="job-link" rel="noopener noreferrer" title="Glassdoor">
      <img src="https://upload.wikimedia.org/wikipedia/commons/thumb/9/9e/Glassdoor_logo_2016.svg/2560px-Glassdoor_logo_2016.svg.png" alt="Glassdoor logo" style="width: 100px;" />
    </a>
  </div>

  <div id="jobsList">
    <!-- Dynamic job postings here -->
  </div>
</section>

<!-- Post Job -->
<section id="post" class="page">
  <h2 style="text-align:center; color:#3f51b5; margin-bottom:1.5rem;">Post a Job Opportunity</h2>
  <form id="postJobForm">
    <h3><i class="fas fa-briefcase" style="margin-right:10px;"></i>Job Details</h3>
    <input type="text" id="jobTitle" placeholder="Job Title (e.g., Web Developer Intern)" required />
    <input type="text" id="company" placeholder="Company Name" required />
    <input type="text" id="location" placeholder="Location (e.g., Remote, New York)" required />
    <textarea id="jobDescription" placeholder="Job Description (Responsibilities, Requirements, etc.)" rows="5"></textarea>
    <input type="submit" value="Post Job Opportunity" />
  </form>
</section>

<!-- Track Applications -->
<section id="track" class="page">
  <h2 style="text-align:center; color:#3f51b5; margin-bottom:1.5rem;">Your Applications</h2>
  <div id="applicationsList">
    <!-- Dynamic applications here -->
  </div>
</section>

<!-- Login/Signup Modal -->
<div id="loginModal" style="display:none; position: fixed; top:0;left:0;right:0;bottom:0; background:rgba(0,0,0,0.7); display:flex; justify-content:center; align-items:center; z-index:10000;">
  <div style="background:white; padding:2rem; border-radius:12px; max-width: 380px; width: 90%; position: relative; box-shadow: 0 5px 25px rgba(0,0,0,0.2);">
    <button onclick="closeLoginModal()" style="position:absolute; top:12px; right:12px; background:#f44336; border:none; color:white; font-weight:bold; font-size:1.3rem; cursor:pointer; border-radius:50%; width:32px; height:32px; display:flex; align-items:center; justify-content:center;">&times;</button>
    <h3 style="color:#3f51b5; text-align:center; margin-bottom:1.5rem;"><i class="fas fa-user-circle" style="margin-right:8px;"></i>Login / Signup</h3>
    <input type="email" id="emailInput" placeholder="Email Address" required />
    <input type="password" id="passwordInput" placeholder="Password" required />
    <div style="margin-top: 1.5rem; display: flex; justify-content: space-between; gap:1rem;">
      <button onclick="loginUser()" class="btn" style="background-color:#3f51b5;"><i class="fas fa-sign-in-alt" style="margin-right:8px;"></i>Login</button>
      <button onclick="signupUser()" class="btn" style="background-color:#4caf50;"><i class="fas fa-user-plus" style="margin-right:8px;"></i>Signup</button>
    </div>
  </div>
</div>

<!-- Apply Modal -->
<div id="applyModal">
  <div class="modal-content">
    <button class="close-btn" onclick="closeApplyModal()">&times;</button>
    <h3><i class="fas fa-file-alt" style="margin-right:10px;"></i>Apply to Job</h3>
    <p id="applyJobInfo" style="text-align:left; background:#f5f5f5; padding:0.8rem; border-radius:6px; margin-bottom:1.5rem;"></p>
    <input type="text" id="applicantName" placeholder="Your Full Name" required />
    <input type="email" id="applicantEmail" placeholder="Your Email Address" required />
    <textarea id="applicantMessage" placeholder="Cover Letter (Why you're a good fit)" rows="4"></textarea>
    <button class="submit-btn" onclick="submitApplication()"><i class="fas fa-paper-plane" style="margin-right:8px;"></i>Submit Application</button>
  </div>
</div>

<footer id="footer" style="display:none;">
  <div style="max-width:800px; margin:0 auto;">
    <p style="font-size:1.2rem; font-weight:600;">CampusConnect</p>
    <p>Connecting students with meaningful employment opportunities</p>
    <div class="social-links">
      <a href="#" title="Facebook"><i class="fab fa-facebook"></i></a>
      <a href="#" title="Twitter"><i class="fab fa-twitter"></i></a>
      <a href="#" title="LinkedIn"><i class="fab fa-linkedin"></i></a>
      <a href="#" title="Instagram"><i class="fab fa-instagram"></i></a>
    </div>
    <p>&copy; 2025 CampusConnect | All rights reserved.</p>
  </div>
</footer>

<script>
  let currentUser = localStorage.getItem('currentUser') || null;
  let jobs = JSON.parse(localStorage.getItem('jobs')) || [];
  let applications = JSON.parse(localStorage.getItem('applications')) || [];
  let applyingJobId = null;

  // Save jobs and applications to localStorage
  function saveData() {
    localStorage.setItem('jobs', JSON.stringify(jobs));
    localStorage.setItem('applications', JSON.stringify(applications));
  }

  // Show page by id, update active nav link
  function showPage(pageId) {
    document.querySelectorAll('.page').forEach(p => p.classList.remove('active'));
    document.getElementById(pageId).classList.add('active');

    // Update nav active link
    document.querySelectorAll('nav a[data-page]').forEach(a => {
      a.classList.toggle('active', a.dataset.page === pageId);
    });
  }

  // Open login modal
  function openLoginModal() {
    document.getElementById('loginModal').style.display = 'flex';
    document.getElementById('emailInput').focus();
  }
  
  // Close login modal
  function closeLoginModal() {
    document.getElementById('loginModal').style.display = 'none';
  }

  // Login user
  function loginUser() {
    const email = document.getElementById('emailInput').value.trim();
    const password = document.getElementById('passwordInput').value.trim();
    if (!email || !password) {
      alert('Please enter both email and password.');
      return;
    }
    currentUser = email;
    localStorage.setItem('currentUser', currentUser);
    alert(`Welcome back, ${email.split('@')[0]}!`);
    closeLoginModal();
    onLogin();
  }

  // Signup user
  function signupUser() {
    const email = document.getElementById('emailInput').value.trim();
    const password = document.getElementById('passwordInput').value.trim();
    if (!email || !password) {
      alert('Please enter both email and password.');
      return;
    }
    if (password.length < 6) {
      alert('Password should be at least 6 characters long.');
      return;
    }
    currentUser = email;
    localStorage.setItem('currentUser', currentUser);
    alert(`Account created successfully! Welcome, ${email.split('@')[0]}!`);
    closeLoginModal();
    onLogin();
  }

  // Actions to run on login
  function onLogin() {
    document.getElementById('landingPage').style.display = 'none';
    document.getElementById('mainNav').style.display = 'flex';
    document.getElementById('footer').style.display = 'block';
    document.getElementById('header-subtext').textContent = `Welcome, ${currentUser.split('@')[0]}`;
    showPage('browse');
    renderJobs();
    renderApplications();
  }

  // Logout event
  document.getElementById('logoutBtn').addEventListener('click', () => {
    if(confirm('Are you sure you want to logout?')) {
      currentUser = null;
      localStorage.removeItem('currentUser');
      document.getElementById('landingPage').style.display = 'flex';
      document.getElementById('mainNav').style.display = 'none';
      document.getElementById('footer').style.display = 'none';
      document.getElementById('header-subtext').textContent = 'Student Job Portal';
      showPage('landingPage');
      clearForms();
    }
  });

  // Clear forms on logout
  function clearForms() {
    document.getElementById('emailInput').value = '';
    document.getElementById('passwordInput').value = '';
    document.getElementById('postJobForm').reset();
  }

  // Navigation clicks
  document.querySelectorAll('nav a[data-page]').forEach(a => {
    a.addEventListener('click', (e) => {
      e.preventDefault();
      const page = a.dataset.page;
      showPage(page);
    });
  });

  // Post job form submit
  document.getElementById('postJobForm').addEventListener('submit', (e) => {
    e.preventDefault();
    if (!currentUser) {
      alert('Please login first to post a job.');
      openLoginModal();
      return;
    }
    const title = document.getElementById('jobTitle').value.trim();
    const company = document.getElementById('company').value.trim();
    const location = document.getElementById('location').value.trim();
    const description = document.getElementById('jobDescription').value.trim();

    if(!title || !company || !location) {
      alert('Please fill all required fields.');
      return;
    }

    const newJob = {
      id: Date.now(),
      title,
      company,
      location,
      description: description || 'No description provided.',
      postedBy: currentUser,
      postedDate: new Date().toLocaleDateString('en-US', {
        year: 'numeric',
        month: 'long',
        day: 'numeric'
      })
    };
    jobs.push(newJob);
    saveData();
    alert('Job posted successfully!');
    document.getElementById('postJobForm').reset();
    showPage('browse');
    renderJobs();
  });

  // Render jobs on browse page
  function renderJobs() {
    const jobsList = document.getElementById('jobsList');
    jobsList.innerHTML = '';
    
    if (jobs.length === 0) {
      jobsList.innerHTML = `
        <div style="text-align:center; padding:2rem; background:white; border-radius:10px; box-shadow:0 2px 10px rgba(0,0,0,0.1);">
          <img src="https://cdn-icons-png.flaticon.com/512/4076/4076478.png" style="width:80px; opacity:0.7; margin-bottom:1rem;">
          <h3 style="color:#555;">No jobs available at the moment</h3>
          <p>Check back later or post a job opportunity!</p>
        </div>
      `;
      return;
    }
    
    jobs.forEach(job => {
      const jobCard = document.createElement('div');
      jobCard.className = 'card';
      jobCard.innerHTML = `
        <h3>${job.title}</h3>
        <div class="job-meta">
          <div>
            <img src="https://cdn-icons-png.flaticon.com/512/619/619153.png" alt="Company icon">
            <span>${job.company}</span>
          </div>
          <div>
            <img src="https://cdn-icons-png.flaticon.com/512/2838/2838912.png" alt="Location icon">
            <span>${job.location}</span>
          </div>
        </div>
        <p>${job.description}</p>
        <small>Posted on: ${job.postedDate}</small>
        <div style="text-align:right;">
          <button class="apply-btn" data-job-id="${job.id}">
            <i class="fas fa-paper-plane" style="margin-right:8px;"></i>Apply Now
          </button>
        </div>
      `;
      jobsList.appendChild(jobCard);
    });
    
    // Add event listeners to apply buttons
    document.querySelectorAll('.apply-btn').forEach(btn => {
      btn.addEventListener('click', (e) => {
        if (!currentUser) {
          alert('Please login first to apply for jobs.');
          openLoginModal();
          return;
        }
        openApplyModal(e.target.closest('button').dataset.jobId);
      });
    });
  }

  // Open apply modal
  function openApplyModal(jobId) {
    applyingJobId = jobId;
    const job = jobs.find(j => j.id == jobId);
    if (!job) return;
    
    document.getElementById('applyJobInfo').innerHTML = `
      <strong>${job.title}</strong><br>
      <em>${job.company}</em><br>
      <span style="color:#555;">📍 ${job.location}</span>
    `;
    document.getElementById('applicantName').value = currentUser.split('@')[0] || '';
    document.getElementById('applicantEmail').value = currentUser || '';
    document.getElementById('applicantMessage').value = '';
    document.getElementById('applyModal').style.display = 'flex';
  }

  // Close apply modal
  function closeApplyModal() {
    document.getElementById('applyModal').style.display = 'none';
    applyingJobId = null;
  }

  // Submit application
  function submitApplication() {
    const name = document.getElementById('applicantName').value.trim();
    const email = document.getElementById('applicantEmail').value.trim();
    const message = document.getElementById('applicantMessage').value.trim();
    const jobId = applyingJobId;
    
    if (!name || !email || !jobId) {
      alert('Please fill all required fields.');
      return;
    }
    
    const job = jobs.find(j => j.id == jobId);
    if (!job) {
      alert('Job not found.');
      return;
    }
    
    const newApplication = {
      id: Date.now(),
      jobId,
      jobTitle: job.title,
      company: job.company,
      applicantName: name,
      applicantEmail: email,
      coverLetter: message || 'No cover letter provided.',
      status: 'Submitted',
      date: new Date().toLocaleDateString('en-US', {
        year: 'numeric',
        month: 'long',
        day: 'numeric'
      })
    };
    
    applications.push(newApplication);
    saveData();
    alert('Application submitted successfully!');
    closeApplyModal();
    renderApplications();
  }

  // Render applications on track page
  function renderApplications() {
    const appsList = document.getElementById('applicationsList');
    appsList.innerHTML = '';
    
    const userApplications = applications.filter(app => app.applicantEmail === currentUser);
    
    if (userApplications.length === 0) {
      appsList.innerHTML = `
        <div style="text-align:center; padding:2rem; background:white; border-radius:10px; box-shadow:0 2px 10px rgba(0,0,0,0.1);">
          <img src="https://cdn-icons-png.flaticon.com/512/4076/4076478.png" style="width:80px; opacity:0.7; margin-bottom:1rem;">
          <h3 style="color:#555;">No applications yet</h3>
          <p>Browse jobs and apply to see your applications here.</p>
          <button onclick="showPage('browse')" style="margin-top:1rem; background:#3f51b5; color:white; border:none; padding:0.7rem 1.5rem; border-radius:6px; cursor:pointer;">
            Browse Jobs
          </button>
        </div>
      `;
      return;
    }
    
    userApplications.forEach(app => {
      const appCard = document.createElement('div');
      appCard.className = 'card';
      appCard.innerHTML = `
        <h3>${app.jobTitle}</h3>
        <p><strong>Company:</strong> ${app.company}</p>
        <p><strong>Status:</strong> 
          <span class="status-badge" style="background:${getStatusColor(app.status)}; color:white;">
            ${app.status}
          </span>
        </p>
        <p><strong>Applied on:</strong> ${app.date}</p>
        ${app.coverLetter ? `<details style="margin-top:0.8rem;">
          <summary>View Cover Letter</summary>
          <div style="background:#f9f9f9; padding:0.8rem; border-radius:6px; margin-top:0.5rem;">
            ${app.coverLetter}
          </div>
        </details>` : ''}
      `;
      appsList.appendChild(appCard);
    });
  }

  // Helper function to get status color
  function getStatusColor(status) {
    switch(status.toLowerCase()) {
      case 'submitted': return '#2196F3';
      case 'under review': return '#FF9800';
      case 'interview scheduled': return '#9C27B0';
      case 'accepted': return '#4CAF50';
      case 'rejected': return '#F44336';
      default: return '#9E9E9E';
    }
  }

  // Initialize the app
  function init() {
    if (currentUser) {
      onLogin();
    } else {
      document.getElementById('landingPage').style.display = 'flex';
      document.getElementById('mainNav').style.display = 'none';
      document.getElementById('footer').style.display = 'none';
    }
    
    // Add sample data if empty
    if (jobs.length === 0) {
      jobs = [
        {
          id: 1,
          title: 'Campus Ambassador',
          company: 'TechStart Inc.',
          location: 'Remote',
          description: 'Represent TechStart on your campus, organize events, and promote our products to fellow students. Perfect for students interested in marketing and technology.',
          postedBy: 'admin@campus.edu',
          postedDate: new Date().toLocaleDateString('en-US', {
            year: 'numeric',
            month: 'long',
            day: 'numeric'
          })
        },
        {
          id: 2,
          title: 'Research Assistant',
          company: 'University Labs',
          location: 'On Campus',
          description: 'Assist professors with academic research in computer science. Requires 10-15 hours per week. Great opportunity for grad students.',
          postedBy: 'professor@university.edu',
          postedDate: new Date(Date.now() - 86400000 * 2).toLocaleDateString('en-US', {
            year: 'numeric',
            month: 'long',
            day: 'numeric'
          })
        },
        {
          id: 3,
          title: 'Web Developer Intern',
          company: 'Digital Solutions',
          location: 'Downtown Office (Hybrid)',
                   description: 'Summer internship for students studying computer science or related fields. Work on real client projects and learn modern web development technologies.',
          postedBy: 'hr@digitalsolutions.com',
          postedDate: new Date(Date.now() - 86400000 * 5).toLocaleDateString('en-US', {
            year: 'numeric',
            month: 'long',
            day: 'numeric'
          })
        }
      ];
      saveData();
    }
    
    if (applications.length === 0 && currentUser) {
      applications = [
        {
          id: 1,
          jobId: 1,
          jobTitle: 'Campus Ambassador',
          company: 'TechStart Inc.',
          applicantName: currentUser.split('@')[0],
          applicantEmail: currentUser,
          coverLetter: 'I would love to represent TechStart on campus as I have experience organizing student events and am passionate about technology.',
          status: 'Under Review',
          date: new Date(Date.now() - 86400000 * 3).toLocaleDateString('en-US', {
            year: 'numeric',
            month: 'long',
            day: 'numeric'
          })
        }
      ];
      saveData();
    }
    
    renderJobs();
    renderApplications();
  }

  // Run initialization when DOM is loaded
  document.addEventListener('DOMContentLoaded', init);
</script>
</body>
</html>